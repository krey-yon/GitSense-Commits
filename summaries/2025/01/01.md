# Activity Summary for 1/1/2025

## 7:08:20 PM
The log shows a single code change to `c:\Users\user\OneDrive\Desktop\Prsnl\blog.kreyon.tech\src\app\page.tsx` on January 1st, 2025 at 6:43:28 PM.  This change replaces the file's content with a Next.js component that renders a simple "hello blog" message centered within a grid layout.  The component uses CSS classes for styling, including responsive adjustments indicated by `sm:` prefixes, and specifies a custom font using CSS variables.  No other files were modified according to this log entry.


## 9:23:54 PM
The log shows development activity across client and server components of a project named "NoBg" on January 1st, 2025.

**Client-side changes:** A single modification occurred at 8:24:33 PM to `Navbar.tsx`. This update integrated Clerk.js for user authentication, adding a `UserButton` for signed-in users and a "Get Started" button to initiate the sign-in flow for unsigned-in users.

**Server-side changes:**  The majority of the activity focused on the server.  The `package.json` file underwent several revisions.  Initially, it contained only basic metadata.  At 8:33:22 PM, dependencies were added, including `express`, `mongoose`, `cors`, `axios`, and several others, indicating the setup of a backend API using Express.js and MongoDB. A `dev` script was added using nodemon at 8:41:04PM.   At 8:38:07 PM, a `.env` file was created to manage environment variables, primarily the `PORT` setting initially set to 3000. The `MONGO_URI` variable was then added and refined until 9:03:18 PM to include a MongoDB connection string (mongodb+srv://kreyon:vikas9899@kreyondb.hmexu.mongodb.net/).

The `index.js` file (server entry point) saw a series of incremental changes, starting from an empty file and gradually evolving to include:
    - importing required modules (`express`, `cors`, `dotenv`, `connectDb`)
    - setting up middleware (`express.json()`, `cors()`)
    - establishing a basic route (`/`) to test API functionality
    - starting the server and listening on a defined port. The server is connected to mongodb at 9:02:39PM.

A `mongodb.js` configuration file was created to handle MongoDB connection.  This file went through several revisions, primarily focusing on error handling and logging around the connection status and initial connection setup. The final version uses the `MONGO_URI` from the `.env` file and logs connection status.

Finally, a `userModel.js` file was added at around 9:05 PM to define a MongoDB schema for users, containing `clerkId`, `email`, `photo`, `firstName`, and `lastName` fields. A `UserControllers.js` file was also started.

In summary, the log documents the initial setup of a backend API using Node.js, Express.js, and MongoDB, which is designed to interact with a frontend using Clerk.js for authentication. The development process was iterative, with frequent small commits showing a steady build-out of server-side functionality.


## 10:23:54 PM
The log details code changes on January 1st, 2025, primarily focused on creating a webhook endpoint to manage users from Clerk.  

The `UserControllers.js` file underwent the most significant changes between 9:44 PM and 10:01 PM.  Initially, a basic `clerkWebhook` function was defined.  Subsequent changes involved:

* **Importing the `Webhook` class from the `svix` library:** This indicates the use of `svix` for webhook verification.
* **Adding webhook verification:** The `whook.verify` method was added to verify the webhook signature using headers (`svix-id`, `svix-timestamp`, `svix-signature`).
* **Implementing a switch statement:** This handles different webhook events ("user.created", "user.updated", "user.deleted").
* **Database interaction:**  The code was updated to interact with a MongoDB database (model `userModel.js`) to create, update, and delete users based on the received webhook events.  A `clerkId` field is used to link the database records with Clerk users.  `User.create`, `User.findOneAndUpdate`, and `User.findOneAndDelete` methods were added for database operations.
* **Adding responses:**  The code sends HTTP status codes and JSON messages ("User created," "User updated," "User deleted") upon successful completion of database operations.


The `vercel.json` file was modified between 9:26 PM and 9:27 PM, changing the build source from `.js` to `index.js` and updating the route destination from `server.js` to `index.js`.

The `.env` file was updated at 9:46 PM to include the `CLERK_WEBHOOK_SECRET` environment variable,  essential for webhook verification.

Finally, `userRoutes.js`  (modified between 10:04 PM and 10:06 PM) sets up the `/api/user/webhooks` POST endpoint, using the completed `clerkWebhook` function from `UserControllers.js`.  The `index.js` file was updated at 10:07 PM to import and use this new route.  The server is configured to listen on port 3000.
